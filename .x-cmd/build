# shellcheck shell=sh disable=SC2039,3043 # source

for i in debian centos alpine bash3 bash4 bash5; do
    echo "Building $i"

    case "$i" in
        debian|alpine)
            docker buildx build \
                --no-cache \
                --platform linux/arm,linux/arm64,linux/amd64 \
                -f "./docker/$i/Dockerfile" \
                -t "xcmd/$i-dev:latest" . --push
            ;;
        centos)
            docker buildx build \
                --no-cache \
                --platform linux/arm64,linux/amd64 \
                -f "./docker/$i/Dockerfile" \
                -t "xcmd/$i-dev:latest" . --push
            ;;
        bash3|bash4|bash5)
            docker buildx build \
                --no-cache \
                --platform linux/arm,linux/arm64,linux/amd64 \
                -f "./docker/$i/Dockerfile" \
                -t "xcmd/$i-dev:latest" . --push
            ;;

    esac
done